{"version":3,"file":"commonHelpers.js","sources":["../src/js/message-izi.js","../src/js/paxabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import iziToast from 'izitoast';\n\nconst MESSAGES = {\n  info: 'Please enter a value in the search field!',\n  warning:\n    'Sorry, there are no images matching your search query. Please try again!',\n  error:\n    'Sorry, there are no connection to the server. Please try again later! ',\n  exception:\n    'Exception: We have some issue with connection. Please try again later! ',\n};\n\nconst MESSAGES_BG_COLORS = {\n  green: '#59a10d',\n  orange: '#ffa000',\n  red: '#ef4040',\n};\n\nfunction showInfoMessage(message, color) {\n  iziToast.info({\n    position: 'topRight',\n    backgroundColor: `${color}`,\n    message: `${message}`,\n  });\n}\n\nexport { MESSAGES, MESSAGES_BG_COLORS, showInfoMessage };","import { MESSAGES, MESSAGES_BG_COLORS, showInfoMessage } from './message-izi.js';\n\nconst options = {\n  method: 'GET',\n};\nconst API_KEY = '45418693-8ae3627eda45814ae2d20cf49';\nconst API_URL = 'https://pixabay.com/api/?';\n\nexport function getGalleryData(queryValue) {\n  try {\n    const searchParams = new URLSearchParams({\n      key: API_KEY,\n      q: queryValue,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n    });\n\n    return fetch(API_URL + searchParams, options)\n      .then((response) => {\n        if (!response.ok) {\n          showInfoMessage(MESSAGES.error, MESSAGES_BG_COLORS.orange);\n          return;\n        }\n        return response.json();\n      })\n      .catch((err) => {\n        showInfoMessage(\n          `${MESSAGES.exception} ERROR:  ${err}`,\n          MESSAGES_BG_COLORS.orange\n        );\n      });\n  } catch (err) {\n    showInfoMessage(\n      `${MESSAGES.exception} ERROR:  ${err}`,\n      MESSAGES_BG_COLORS.orange\n    );\n  }\n}\n","import SimpleLightbox from 'simplelightbox';\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nexport function renderGallery(data, tagToInsert) {\n  tagToInsert.innerHTML = markup(data);\n\n  lightbox.refresh();\n}\n\nfunction markup(data) {\n  return data.hits\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => `\n            <li class=\"gallery-item hvr-grow\">\n                <a class=\"gallery-link\" href=\"${largeImageURL}\">\n                    <figure class=\"gallery-figure \">\n                        <img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\">\n                        <figcaption class=\"gallery-figcaption\">\n                            <ul class=\"img-content-wrapper\">\n                                <li>Likes<span>${likes}</span></li>\n                                <li>Views<span>${views}</span></li>\n                                <li>Comments<span>${comments}</span></li>\n                                <li>Downloads<span>${downloads}</span></li>\n                            </ul>\n                        </figcaption>\n                    </figure>\n                </a>\n            </li>\n          `\n    )\n    .join('');\n}\n","import iziToast from 'izitoast';\n\nimport { MESSAGES, MESSAGES_BG_COLORS, showInfoMessage } from './js/message-izi.js';\nimport { getGalleryData } from './js/paxabay-api.js';\nimport { renderGallery } from './js/render-functions.js';\n\nconst form = document.querySelector('.search-form');\nconst gallery = document.querySelector('.gallery');\nconst div = document.createElement('div');\n\nform.addEventListener('submit', onSubmitForm);\n\nfunction onSubmitForm(event) {\n  event.preventDefault();\n\n  iziToast.destroy();\n  gallery.innerHTML = '';\n  addLoader();\n\n  const formData = new FormData(event.target);\n  const { search } = Object.fromEntries(formData.entries());\n\n  if (!search.trim()) {\n    showInfoMessage(MESSAGES.info, MESSAGES_BG_COLORS.red);\n    gallery.innerHTML = '';\n    return;\n  }\n\n  getGalleryData(search.trim())\n    .then(galleryData => {\n      if (validateGalleryData(galleryData)) {\n        renderGallery(galleryData, gallery);\n      }\n    })\n    .catch(error => {\n      showInfoMessage(MESSAGES.exception + error, MESSAGES_BG_COLORS.orange);\n    })\n    .finally(() => {\n      event.target.reset();\n    });\n}\n\nfunction addLoader() {\n  const div = document.createElement('div'); // Добавление создания элемента div\n  div.classList.add('loader');\n  gallery.append(div);\n}\n\nfunction validateGalleryData(galleryData) {\n  if (!galleryData) {\n    gallery.innerHTML = '';\n    return false;\n  } else if (galleryData && galleryData.totalHits === 0) {\n    showInfoMessage(MESSAGES.warning, MESSAGES_BG_COLORS.red);\n    gallery.innerHTML = '';\n    return false;\n  } else {\n    return true;\n  }\n}\n"],"names":["MESSAGES","MESSAGES_BG_COLORS","showInfoMessage","message","color","iziToast","options","API_KEY","API_URL","getGalleryData","queryValue","searchParams","response","err","lightbox","SimpleLightbox","renderGallery","data","tagToInsert","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","form","gallery","onSubmitForm","event","addLoader","formData","search","galleryData","validateGalleryData","error","div"],"mappings":"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"}